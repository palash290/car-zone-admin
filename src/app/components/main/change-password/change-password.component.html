<div class="ct_dashbaord_middle">
    <div class="row">
        <div class="col-md-12">
            <div class="d-flex align-items-center gap-3 mb-3">
                <!-- <a href="my-profile.html" class="ct_back_icon"><i class="fa-solid fa-chevron-left"></i></a> -->
                <h4 class="ct_fs_22 ct_fw_600 mb-0 ct_text_black">Change Password</h4>
            </div>
            <form [formGroup]="form" class="ct_mt_30">

                <div class="ct_outline_border mt-4 ct_py_38">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group mb-4">
                                <label for="" class="mb-2 ct_fw_500 ct_fs_16">Current Password <span
                                        class="ct_red_text">*</span></label>
                                <div class="position-relative">
                                    <input type="{{ isPasswordVisible1 ? 'text' : 'password' }}"
                                        class="form-control ct_custom_input bg-transparent "
                                        placeholder="Enter Current Password" formControlName="current_password"
                                        maxlength="20">
                                    <i class="fa-regular ct_show_eye"
                                        [ngClass]="isPasswordVisible1 ? 'fa-eye' : 'fa-eye-slash' "
                                        (click)="togglePasswordVisibility1()"></i>

                                </div>
                                <div *ngIf="form.controls['current_password']?.invalid && form.controls['current_password'].touched"
                                    class="err_msg">
                                    <div *ngIf="form.controls['current_password'].errors?.['required']">Current
                                        password is
                                        required.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group mb-4">
                                <label for="" class="mb-2 ct_fw_500 ct_fs_16">New Password <span
                                        class="ct_red_text">*</span></label>
                                <div class="position-relative">
                                    <input type="{{ isPasswordVisible2 ? 'text' : 'password' }}"
                                        class="form-control ct_custom_input bg-transparent "
                                        placeholder="Enter New Password" formControlName="new_password" maxlength="20">
                                    <i class="fa-regular ct_show_eye"
                                        [ngClass]="isPasswordVisible2 ? 'fa-eye' : 'fa-eye-slash' "
                                        (click)="togglePasswordVisibility2()"></i>

                                </div>
                                <!-- <div class="err_msg"
                                    *ngIf="form.controls['new_password']?.invalid && form.controls['new_password']?.touched">
                                    <div *ngIf="form.controls['new_password'].errors?.['required']">New password is
                                        required.
                                    </div>
                                    <div *ngIf="form.controls['new_password'].errors?.['minlength']">
                                        New password must be at least 8 characters long.
                                    </div>
                                </div> -->

                                <div class="err_msg"
                                    *ngIf="form.controls['new_password']?.invalid && form.controls['new_password']?.touched">

                                    <div
                                        *ngIf="form.controls['new_password'].errors?.['required']; else checkMinLength">
                                        New password is required.
                                    </div>

                                    <ng-template #checkMinLength>
                                        <div
                                            *ngIf="form.controls['new_password'].errors?.['minlength']; else checkPattern">
                                            New password must be at least 8 characters long.
                                        </div>
                                    </ng-template>

                                    <ng-template #checkPattern>
                                        <div *ngIf="form.controls['new_password'].errors?.['pattern']">
                                            New password must include at least 1 lowercase letter, 1 uppercase letter, 1
                                            number, and 1 special character.
                                        </div>
                                    </ng-template>

                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group mb-4">
                                <label for="" class="mb-2 ct_fw_500 ct_fs_16">Confirm Password <span
                                        class="ct_red_text">*</span></label>
                                <div class="position-relative">
                                    <input type="{{ isPasswordVisible3 ? 'text' : 'password' }}"
                                        class="form-control ct_custom_input bg-transparent "
                                        placeholder="Enter Confirm Password" formControlName="confirm_password"
                                        maxlength="20">
                                    <!-- <i class="fa-regular fa-eye "></i> -->
                                    <i class="fa-regular ct_show_eye"
                                        [ngClass]="isPasswordVisible3 ? 'fa-eye' : 'fa-eye-slash' "
                                        (click)="togglePasswordVisibility3()"></i>

                                </div>
                                <div *ngIf="form.controls['confirm_password']?.invalid && form.controls['confirm_password'].touched"
                                    class="err_msg">
                                    <div *ngIf="form.controls['confirm_password'].errors?.['required']">
                                        Confirm password is required.</div>
                                    <div
                                        *ngIf="passwordMismatch && !form.controls['confirm_password'].errors?.['required']">
                                        Passwords do not match.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-4">
                        <button (click)="submitForm()" class="ct_red_btn px-5">Save Changes</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div *ngIf="loading" class="ct_loader_main">
        <div class="loader"></div>
    </div>